{% extends "base.html" %} {% block content %}
<h1 class="mb-4">{{ group.name }} - Users</h1>

<div class="d-flex gap-2 mb-3">
  <a
    href="{{ url_for('groups.add_user_to_group', group_id=group.id) }}"
    class="btn btn-primary"
  >
    Add User
  </a>
  <a href="{{ url_for('groups.list_groups') }}" class="btn btn-secondary"
    >Back to Groups</a
  >
</div>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Username</th>
      <th>Email</th>
      <th>Active Until</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for user in group.users %}
    <tr>
      <td>{{ user.username }}</td>
      <td>{{ user.email }}</td>
      <td>
        {% if user.disabled_after %} {{ user.disabled_after.strftime("%Y-%m-%d %H:%M")
        }} {% else %} Not Set {% endif %}
      </td>
      <td>
        <a
          href="{{ url_for('users.edit_user', user_id=user.id) }}"
          class="btn btn-warning btn-sm"
          >Edit</a
        >
        <form
          method="post"
          action="{{ url_for('users.delete_user', user_id=user.id) }}"
          style="display: inline"
        >
          <button
            type="submit"
            class="btn btn-danger btn-sm"
            onclick="return confirm('Are you sure you want to delete this user?');"
          >
            Delete
          </button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
